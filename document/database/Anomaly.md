## 1. 이상현상 (Anomaly)

### 1-1. 이상 현상의 정의 및 개념

- **정의**
  데이터베이스 설계가 잘못되어 불필요한 **데이터 중복**이 발생하고, 이로 인해 데이터 조작(삽입, 갱신, 삭제) 시 **데이터의 무결성** 및 **일관성**이 깨지는 논리적 오류.
- **주요 특징**
  대부분 중복된 데이터와 불필요한 **종속성**으로 인해 발생.
  데이터베이스가 **비정규화**된 상태일 때 주로 발생함.
- **해결책:**
  **정규화(Normalization)**: 데이터 중복을 줄이고 데이터 종속성을 최소화하는 설계 방법.
  정규화된 구조는 데이터를 여러 테이블로 분리하여 이상 현상을 방지함.

  <br>

### 1-2. 이상현상의 원인

- 데이터 중복 (Redundancy) <br>
  같은 데이터가 여러 곳에 반복 저장되어, 삽입/수정/삭제 작업 시 불일치(모순) 문제가 발생.
- 데이터 종속성 (Dependency) <br>
  데이터가 서로 불필요하게 결합되어, 한 항목을 수정할 때 관련된 다른 항목들을 전부 수정해야 하는 비효율 발생.
- 비정규화된 구조 <br>
  여러 개의 독립적인 정보를 하나의 테이블에 저장함으로써, 데이터 중복 및 종속성 문제가 심각해짐.

 <br>

### 1-3. 이상현상이 DB에 미치는 영향

- **데이터 무결성 문제** <br>
  **갱신 이상**으로 인한 **데이터 모순** 발생.
  **삽입 이상**으로 인한 **제약 조건 위반** 발생.
- **일관성 저해 및 신뢰도 하락** <br>
  무결성이 깨진 데이터는 곧 **일관성 상실**로 이어짐.
  DB 전체의 신뢰도가 떨어지고, **비즈니스 의사결정에 오류** 발생 가능.
- **데이터 손실 위험** <br>
  **삭제 이상**으로 인한 **데이터 손실** 발생.
- **데이터 처리의 복잡성 및 비효율성** <br>
  데이터 중복 시 수정/삭제 시 **일부만 변경되거나 누락**되어 전체 데이터 불일치 상태 초래.
  데이터 처리의 **복잡성 및 비효율성** 증가.
- **시스템 부하 및 비용 증가** <br>
  데이터 중복 심화 시 **디스크 공간 낭비** 발생.
  데이터 변경 시 반복 작업으로 **시스템 부하 및 처리 비용 증가**.

 <br>

## 2. 이상현상의 종류

이상현상은 DML 방식에 따라 크게 3가지로 분류됨

### **삽입 이상 (Insertion Anomaly)**

새로운 데이터를 **추가할 수 없거나** 추가할 때 불필요한 데이터를 **같이 넣어야 하는** 문제를 의미함

- 새로운 엔티티(개체)의 정보를 릴레이션에 삽입하려고 할 때, 이 릴레이션이 다른 엔티티의 정보에 **부분적으로 종속**되어 있어 삽입 자체가 불가능해지거나, 필수적이지 않은 `NULL` 값을 강제하는 현상
- [e.g.] 학생 정보와 수강 과목 정보가 하나의 테이블에 묶여 있는 경우
  **새로운 과목**이 개설되었지만, 아직 해당 과목을 **수강하는 학생이 한 명도 없다면**, 그 과목 정보(과목 코드, 과목명)를 저장하기 위해 학생 정보 필드에 `NULL` 값을 넣거나, 심지어 **기본 키 제약 조건** 때문에 아예 저장할 수 없음

 <br>

### **갱신 이상 (Update Anomaly)**

**동일한 데이터가 여러 곳에 중복 저장되어, 수정할 때 일부만 수정되고 일부는 누락되는 현상**

- 중복되어 저장된 값 중 일부 튜플(행)만 수정되고 나머지는 수정되지 않아, 데이터베이스 내에서 동일한 정보에 대해 **서로 다른 값**이 존재하는 상태가 됨
- [e.g.] 특정 교수의 이름이 수십 개의 레코드에 중복되어 저장되어 있는 경우
  이 교수가 결혼 등으로 인해 **이름을 변경**했을 때, 관리자가 실수로 **일부 레코드의 이름만 수정**하고 나머지는 놓치면, DB에는 **바뀐 이름과 이전 이름이 공존**하게 되어 데이터의 **일관성**이 깨짐

 <br>

### **삭제 이상 (Deletion Anomaly)**

**특정 데이터를 삭제했을 때, 원하지 않는 다른** 정보까지 함께 삭제되는 문제

- 특정 엔티티에 관련된 **모든 튜플**을 삭제할 때, 이 튜플에 **혼합 저장되어 있던 다른 엔티티에 관한 정보까지 함께 삭제**되어 중요한 정보가 영구적으로 유실되는 현상
- [e.g.] 학생과 과목 정보가 묶인 테이블
  어떤 과목을 마지막으로 수강하던 학생이 수강을 철회하여 해당 학생의 레코드를 DB에서 삭제하는 경우,
  이 레코드에는 해당 학생 정보 뿐만 아니라 그 과목에 대한 유일한 정보도 함께 저장되어 있다면, 학생 레코드를 삭제함으로써 과목 정보까지 함께 유실됨

 <br>

## 3. 이상현상의 예시

| 학번 | 이름   | 과목 | 교수   |
| ---- | ------ | ---- | ------ |
| 1001 | 김철수 | DB   | 박교수 |
| 1001 | 김철수 | OS   | 이교수 |
| 1002 | 이영희 | DB   | 박교수 |

위 테이블의 기본 키(PK)가 {**학번**, **과목**}의 조합이라고 가정

학생과 과목 정보를 한 테이블에 담는 경우

- **삽입 이상**
  <br>

  새로운 학생이 입학할 때, 아직 수강 신청한 과목이 하나도 없다면, 기본 키의 일부인 ‘과목’ 필드에 NULL을 넣을 수 없어 학생 정보 자체를 테이블에 추가하는 것이 불가능함

- **갱신 이상**
  <br>

  DB과목의 담당 교수 정보(**박교수**)가 김철수 행과 이영희 행에 **중복 저장**되어 있음
  DB 과목의 담당 교수가 **'박교수'에서 '최교수'로 변경**되었을 때, 1001번 학생에 해당하는 교수명만 바꾸는 경우, 데이터 모순이 발생함.
  변경 작업 시 중복된 레코드의 수만큼 반복적인 수정작업이 요구되어 시스템 부하가 증가하고 운영 비용이 늘어남.

- **삭제 이상**
  <br>
  이영희 학생이 수강했던 DB 과목을 철회하기 위해 해당 레코드를 삭제하는 경우,
  원래 의도는 수강 기록만 삭제하는 것이었지만 이 레코드를 삭제함으로써 DB에서 이영희 학생의 학번과 이름 정보까지 함께 삭제되어 유실됨.
  이는 학생 엔티티에 관한 중요한 정보가, 수강이라는 다른 엔티티의 정보와 묶여있었기 때문에 발생한 **데이터 손실(Data Loss)** 문제이며, 이상 현상 중 가장 치명적일 수 있음.
