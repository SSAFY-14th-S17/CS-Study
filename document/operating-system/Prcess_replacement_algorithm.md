# CPU 스케줄링 알고리즘이란?
CPU 스케줄링은 언제, 어떤 프로세스에 CPU를 할당할지 결정하는 작업이다.
이 작업을 수행하기 위해 사용하는 알고리즘을 CPU 스케줄링 알고리즘이라고 한다.

# CPU 스케줄러는 언제 스케줄링을 결정하는가?
>실행(running) -> 대기(waiting)
>실행(running) -> 준비(ready)
>대기(waiting) -> 준비(ready)
>종료(Terminated)

1, 4번의 상황에서 스케줄링이 발생하는 것을 **비선점형(non-preemptive) 스케줄링** 이라고 하고, 이외의 모든 스케줄링은 **선점형(preemptive) 스케줄링**이라고 한다.

# 1. 비선점형 스케줄링
>어떤 프로세스가 CPU를 점유하고 있다면 강제로 뺏지 않는 방식

**장점**
- 문맥교환으로 인한 부하가 적다.
**단점**
- 프로세스의 배치에 따라 효율성 차이가 크다.

## 1) FCFS(First Come, First Served)
>가장 먼저 요청한 프로세스에 CPU를 할당해주는 방식

**특징**
**Convoy Effect(호위효과)** : 몇 개의 시간이 오래 걸리는 프로세스로 인해 전체 OS가 느려지는 현상

## 2) SJF(Shortes Job First)
>실행 시간이 가장 짧은 프로세스를 먼저 실행하는 알고리즘

**특징**
- 실제로 프로세스의 CPU 실행 시간을 예측하는 것이 어렵다는 문제가 있다.
- **기아(Starvation) 현상** : 긴 시간을 필요로 하는 프로세스의 우선순위가 계속 밀려 실행되지 못하고 무기한으로 대기

## 3) 우선순위(Priority)
>각 프로세스에 우선순위 번호가 있는 알고리즘

**특징**
- 기아 문제를 해결하기 위해 오래된 작업의 우선순위를 높여주는 노화(againg)를 사용할 수 있다.
---
# 2. 선점형 스케줄링
>어떤 프로세스가 CPU를 할당받아 실행 중이라더라도 운영체제가 이를 강제로 뺏을 수 있는 방식

**장점**
- 처리 시간이 매우 긴 프로세스의 CPU 사용 독점을 막을 수 있어 효율적인 운영 가능

**단점**
- 잦은 컨텍스트 스위칭으로 인해 오버헤드가 커질 수 있다.

## 1) 라운드 로빈(RR, Round Robin)
>각각의 프로세스에 동일한 할당 시간을 부여하여 해당 시간 동안만 CPU를 이용하도록 하는 방식

**장점**
- 빠르게 응답할 수 있다.

**단점**
- 할당시간이 너무 길면 FCFS처럼 작동한다.
- 할당시간이 너무 짧으면 문맥 교환이 빈번하게 작용하여 오버헤드가 커진다.


## 2) SRF(Shortes Remaining Time First)
> 현재 실행되고 있는 프로세스의 남은 시간보다 더 적게 남은 프로세스가 들어오면 현재 실행되는 프로세스를 중단하고 짧은 프로세스를 실행하도록 바꾸는 방식

**장점**
- 평균 대기시간을 줄일 수 있다.

**단점**
- 다음 프로세스의 CPU burst time을 예측하기 어렵다.

## 3) 다단계 큐(Multilevel Queue)
> 준비 큐(Ready Queue)를 여러 개의 독립적인 큐로 분할하여 프로세스의 특성에 따라 서로 다른 스케줄링 정책을 적용하는 방식

**구조**

| 큐 이름 | 특징 (할당되는 프로세스) | 스케줄링 방식 예시 |
| :--- | :--- | :--- |
| **최상위 큐** | 시스템 프로세스, 실시간(Real-Time) 프로세스 | FCFS (First-Come, First-Served) |
| **중간 큐** | 대화형(Interactive) 프로세스 (입출력 중심) | Round Robin (RR, 응답 시간 중요) |
| **최하위 큐** | 배치(Batch) 프로세스 (CPU 중심) | FCFS 또는 SJF (처리율(Throughput) 중요) |

**작동 방식**
- 단계 큐 시스템에서는 각 큐에 절대적인 우선순위가 부여된다.

1. **높은 큐 우선 선점 (Absolute Priority)**: CPU는 항상 가장 높은 우선순위 큐의 프로세스에게 할당된다.

2. **선점**: 높은 우선순위 큐에 프로세스가 도착하면, 현재 낮은 우선순위 큐에서 실행 중이던 프로세스는 **즉시 중단(선점)**되고 새로운 프로세스가 실행된다.

3. **큐 내부 스케줄링**: 각 큐 내에서는 독립적인 스케줄링 알고리즘(RR, FCFS 등)이 적용되어 프로세스들이 실행된다.

**장점**
- 프로세스의 특성에 최적화된 스케줄링 정책을 적용하여 응답 시간과 처리율을 동시에 개선할 수 있다. 
- 구현이 비교적 간단하다.

**단점**
- **기아 현상(Starvation)** :  높은 우선순위 큐에 프로세스가 끊임없이 도착하면, 낮은 우선순위 큐의 프로세스는 영원히 실행되지 못할 수 있다.